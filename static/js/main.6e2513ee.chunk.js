(this.webpackJsonpmatopeli=this.webpackJsonpmatopeli||[]).push([[0],[,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),o=n.n(c),r=n(7),s=n.n(r),i=(n(13),n(2)),u=(n(14),n(3)),l=function(e){return Object(u.a)(Array(Math.round(e)).keys())},j=(n(15),function(e){var t=e.points,n=e.setPoints,o=Object(c.useState)(parseInt(localStorage.getItem("snake-board-size"))||30),r=Object(i.a)(o,2),s=r[0],j=r[1],b=Object(c.useState)(parseInt(localStorage.getItem("snake-board-size"))||30),d=Object(i.a)(b,2),f=d[0],p=d[1],O=function(){for(var e=[],t=0;t<s;t++){e[t]=[];for(var n=0;n<f;n++)e[t][n]="blank"}return e},m=function(){return[{name:"tyhj\xe4",location:[]},{name:"keski",location:l(.6*f).map((function(e){return{x:Math.round(s/2),y:e+Math.ceil(.2*f)}}))},{name:"reunat",location:[].concat(Object(u.a)(l(f).map((function(e){return{x:e,y:0}}))),Object(u.a)(l(f).map((function(e){return{x:e,y:f-1}}))),Object(u.a)(l(s).map((function(e){return{x:0,y:e}}))),Object(u.a)(l(s).map((function(e){return{x:s-1,y:e}}))))},{name:"oma",location:[{x:2,y:5},{x:2,y:6}]}]},h=function(){return m()[Math.floor(Math.random()*m().length)]},x=function e(){var t={x:Math.floor(Math.random()*f),y:Math.floor(Math.random()*s)};return k.location.some((function(e){var n=e.x,a=e.y;return t.x===n&&t.y===a}))?e():t},v=Object(c.useState)(h()),y=Object(i.a)(v,2),k=y[0],S=y[1],g=Object(c.useState)(O()),N=Object(i.a)(g,2),w=N[0],I=N[1],E=Object(c.useState)([{x:1,y:1}]),M=Object(i.a)(E,2),A=M[0],P=M[1],B=Object(c.useState)("right"),J=Object(i.a)(B,2),L=J[0],z=J[1],C=Object(c.useState)(x()),G=Object(i.a)(C,2),K=G[0],F=G[1],R=Object(c.useState)(),T=Object(i.a)(R,2),U=T[0],q=T[1],D=Object(c.useState)(!1),H=Object(i.a)(D,2),Q=H[0],V=H[1],W=Object(c.useState)(!1),X=Object(i.a)(W,2),Y=X[0],Z=X[1],$=Object(c.useState)(null),_=Object(i.a)($,2),ee=_[0],te=_[1];Object(c.useEffect)((function(){f>=10&&f<=100&&s>=10&&s<=100&&(S(h()),I(O()),F(x()))}),[f,s]);document.addEventListener("keydown",(function(e){switch(e.keyCode){case 37:z("left");break;case 38:z("top");break;case 39:z("right");break;case 40:z("bottom")}}));var ne=w.map((function(e,t){return Object(a.jsx)("div",{className:"Snake-row",children:e.map((function(e,n){return Object(a.jsx)("div",{className:"tile ".concat(e)},"".concat(t,"-").concat(n))}))},t)}));return function(e,t,n){var a=Object(c.useRef)();Object(c.useEffect)((function(){a.current=e}),[e]),Object(c.useEffect)((function(){if(null!==t){var e=setInterval((function(){a.current()}),t);return n(e),function(){return clearInterval(e)}}}),[t,n])}((function(){if(Y){var e=[];switch(console.log("direction",L,f,s,typeof f),L){case"right":e.push({x:A[0].x,y:(A[0].y+1)%f});break;case"left":e.push({x:A[0].x,y:(A[0].y-1+f)%f});break;case"top":e.push({x:(A[0].x-1+s)%s,y:A[0].y});break;case"bottom":e.push({x:(A[0].x+1)%s,y:A[0].y})}if(function(){var e=A[0],t=A.slice(1,-1).find((function(t){return t.x===e.x&&t.y===e.y})),n=k.location.some((function(t){var n=t.x,a=t.y;return e.x===n&&e.y===a}));return t||n}()){V(!0),clearInterval(U);var a=JSON.parse(localStorage.getItem("snake-points"))||[],c=prompt("Peli p\xe4\xe4ttyi! Anna nimimerkkisi:");a.push({name:c,points:t}),localStorage.setItem("snake-points",JSON.stringify(a)),window.dispatchEvent(new Event("storage"))}A.forEach((function(t){e.push(t)}));var o=A[0];o.x===K.x&&o.y===K.y?(F(x),n(t+1)):e.pop(),P(e),function(){var e=O();A.forEach((function(t){e[t.x][t.y]="snake"})),e[K.x][K.y]="food",k.location.forEach((function(t){e[t.x][t.y]="obstacle"})),I(e)}()}}),150,q),Object(a.jsxs)("div",{className:"Snake-board",children:[!Y&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{children:["Pelilaudan koko on nyt ",f," ruutua."]}),Object(a.jsx)("div",{children:"Aseta halutessasi uusi pelilaudan koko:"}),Object(a.jsx)("input",{className:"Board-size",placeholder:"Koko 10-100",type:"number",onChange:function(e){var t=parseInt(e.target.value);t<=100&&t>=10?(console.log("OK",t),p(t),j(t),localStorage.setItem("snake-board-size",t),te(null)):(console.error("ei hyv\xe4",t),te("Pelilaudan koko on liian ".concat(t>100?"suuri":"pieni")))}}),ee&&Object(a.jsx)("div",{className:"Error",children:ee}),Object(a.jsx)("button",{className:"Start-game",onClick:Z,children:"Aloita peli"})]}),Y&&ne,Q&&Object(a.jsx)("div",{className:"Game-over",children:"Game over!"})]})}),b=(n(16),function(e){var t=e.points;return Object(a.jsxs)("div",{className:"Points",children:[t," pistett\xe4"]})}),d=(n(17),function(){return JSON.parse(localStorage.getItem("snake-points"))||[]}),f=function(){var e=Object(c.useState)(d()),t=Object(i.a)(e,2),n=t[0],o=t[1];return window.addEventListener("storage",(function(){o(d())})),Object(a.jsxs)("div",{className:"LeaderBoard",children:[Object(a.jsx)("div",{className:"LeaderBoard-header",children:"Top 5"}),Object(a.jsx)("div",{className:"LeaderBoard-points",children:n.sort((function(e,t){return t.points-e.points})).slice(0,5).map((function(e,t){return Object(a.jsxs)("div",{children:[e.name," ",e.points]},"".concat(e.points,"-").concat(t))}))})]})},p=function(){var e=Object(c.useState)(0),t=Object(i.a)(e,2),n=t[0],o=t[1];return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)("header",{className:"App-header",children:"Matopeli"}),Object(a.jsx)(b,{points:n}),Object(a.jsx)(j,{points:n,setPoints:o}),Object(a.jsx)("button",{onClick:function(){return window.location.reload()},children:"Uusi peli"}),Object(a.jsx)(f,{})]})};s.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(p,{})}),document.getElementById("root"))}],[[18,1,2]]]);
//# sourceMappingURL=main.6e2513ee.chunk.js.map